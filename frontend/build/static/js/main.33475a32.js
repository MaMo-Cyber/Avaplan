/*! For license information please see main.33475a32.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),l=n(43),a=n(950);function s(e){var t="https://star-quest-app.preview.emergentagent.com","/api"),bn=e=>{let{hours:t,minutes:n}=e;const r=6*n-90,l=t%12*30+.5*n-90;return(0,Tt.jsx)("div",{className:"flex justify-center mb-4",children:(0,Tt.jsxs)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",className:"border-2 border-purple-300 rounded-full",children:[(0,Tt.jsx)("circle",{cx:"100",cy:"100",r:"95",fill:"white",stroke:"#8b5cf6",strokeWidth:"4"}),[...Array(12)].map(((e,t)=>{const n=30*t-90,r=100+80*Math.cos(n*Math.PI/180),l=100+80*Math.sin(n*Math.PI/180),a=100+70*Math.cos(n*Math.PI/180),s=100+70*Math.sin(n*Math.PI/180);return(0,Tt.jsx)("line",{x1:r,y1:l,x2:a,y2:s,stroke:"#6b7280",strokeWidth:"3"},t)})),[...Array(12)].map(((e,t)=>{const n=0===t?12:t,r=30*t-90,l=100+60*Math.cos(r*Math.PI/180),a=100+60*Math.sin(r*Math.PI/180);return(0,Tt.jsx)("text",{x:l,y:a+5,textAnchor:"middle",fontSize:"16",fontWeight:"bold",fill:"#4b5563",children:n},t)})),(0,Tt.jsx)("line",{x1:"100",y1:"100",x2:100+50*Math.cos(l*Math.PI/180),y2:100+50*Math.sin(l*Math.PI/180),stroke:"#dc2626",strokeWidth:"6",strokeLinecap:"round"}),(0,Tt.jsx)("line",{x1:"100",y1:"100",x2:100+70*Math.cos(r*Math.PI/180),y2:100+70*Math.sin(r*Math.PI/180),stroke:"#1f2937",strokeWidth:"4",strokeLinecap:"round"}),(0,Tt.jsx)("circle",{cx:"100",cy:"100",r:"8",fill:"#4b5563"})]})})},yn=e=>{let{filled:t,onClick:n}=e;return(0,Tt.jsx)("button",{onClick:n,className:"text-2xl transition-all duration-200 hover:scale-110 ".concat(t?"text-yellow-400":"text-gray-300"),children:t?"\u2b50":"\u2606"})},vn=e=>{let{task:t,weekStars:n,onStarClick:r}=e;return(0,Tt.jsxs)("div",{className:"grid grid-cols-8 gap-4 p-4 bg-white rounded-xl shadow-sm border border-purple-100 hover:shadow-md transition-shadow",children:[(0,Tt.jsx)("div",{className:"font-medium text-purple-800 flex items-center",children:t.name}),["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map((e=>{const l=(e=>{const r=n.find((n=>n.task_id===t.id&&n.day===e));return r?r.stars:0})(e);return(0,Tt.jsxs)("div",{className:"flex justify-center items-center space-x-1",children:[(0,Tt.jsx)(yn,{filled:l>=1,onClick:()=>r(t.id,e,l>=1?0:1)}),(0,Tt.jsx)(yn,{filled:l>=2,onClick:()=>r(t.id,e,l>=2?1:2)})]},e)}))]})},xn=e=>{let{taskStars:t,availableStars:n,totalEarned:r,onAddTaskStarsToAvailable:l}=e;return(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-purple-100",children:[(0,Tt.jsx)("h3",{className:"text-xl font-semibold text-purple-800 mb-4 text-center",children:"\u2b50 Sterne-\xdcbersicht \u2b50"}),(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Tt.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-300",children:[(0,Tt.jsx)("h4",{className:"text-lg font-semibold text-purple-800 mb-2",children:"Aufgaben-Sterne"}),(0,Tt.jsxs)("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:[t," \u2b50"]}),t>0&&(0,Tt.jsx)("button",{onClick:l,className:"text-xs bg-blue-500 text-white px-3 py-1 rounded-lg hover:bg-blue-600 transition-colors",children:"\u27a1\ufe0f Zu Verf\xfcgbar"})]}),(0,Tt.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl border-2 border-yellow-300",children:[(0,Tt.jsx)("h4",{className:"text-lg font-semibold text-purple-800 mb-2",children:"Belohnungs-Sterne"}),(0,Tt.jsxs)("div",{className:"text-4xl font-bold text-yellow-600 mb-2",children:[n," \u2b50"]}),(0,Tt.jsx)("p",{className:"text-sm text-gray-600",children:"Von Herausforderungen"})]}),(0,Tt.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border-2 border-green-300",children:[(0,Tt.jsx)("h4",{className:"text-lg font-semibold text-purple-800 mb-2",children:"Gesamt Verdient"}),(0,Tt.jsxs)("div",{className:"text-4xl font-bold text-green-600 mb-2",children:[r," \u2b50"]}),(0,Tt.jsx)("p",{className:"text-sm text-gray-600",children:"Diese Woche"})]})]}),(0,Tt.jsx)("div",{className:"mt-4 text-center text-sm text-gray-500",children:"\ud83d\udca1 Tipp: Nimm Sterne aus dem Tresor heraus, um sie f\xfcr Belohnungen zu verwenden!"})]})},wn=e=>{let{current:t,total:n,starsInSafe:r,onOpenSafe:l,onAddToSafe:a,onOpenAdminSettings:s}=e;const o=n>0?t/n*100:0;return(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-purple-100",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-purple-800",children:"W\xf6chentlicher Fortschritt"}),(0,Tt.jsxs)("div",{className:"text-sm text-purple-600",children:[t," / ",n," Sterne"]})]}),(0,Tt.jsx)("div",{className:"w-full bg-purple-100 rounded-full h-4 mb-4",children:(0,Tt.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 h-4 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(o,100),"%")}})}),(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Tt.jsxs)("button",{onClick:l,className:"flex items-center bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors",children:["\ud83d\udcb0 Tresor: ",r," \u2b50"]}),(0,Tt.jsx)("button",{onClick:a,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",disabled:0===t,children:"\u2b07\ufe0f In Tresor"})]}),(0,Tt.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",onClick:s,children:"\u2699\ufe0f Verwaltung"})]})]})},kn=e=>{let{isOpen:t,onClose:n,rewardName:r,requiredStars:l,availableStars:a}=e;return t?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\ude14"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-purple-800 mb-4",children:"Nicht genug Sterne!"}),(0,Tt.jsxs)("div",{className:"text-gray-600 mb-6",children:[(0,Tt.jsxs)("p",{className:"mb-3",children:["Du m\xf6chtest ",(0,Tt.jsxs)("span",{className:"font-semibold text-purple-800",children:['"',r,'"']})," einl\xf6sen."]}),(0,Tt.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Tt.jsxs)("p",{className:"mb-2",children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Ben\xf6tigt:"})," ",l," \u2b50"]}),(0,Tt.jsxs)("p",{className:"mb-2",children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Verf\xfcgbar:"})," ",a," \u2b50"]}),(0,Tt.jsxs)("p",{className:"text-red-600 font-medium",children:["Du brauchst noch ",Math.max(0,(l||0)-(a||0))," \u2b50 mehr!"]})]})]}),(0,Tt.jsx)("div",{className:"text-sm text-gray-500 mb-6",children:"\ud83d\udca1 Tipp: Sammle mehr Sterne durch Aufgaben oder nimm Sterne aus dem Tresor!"}),(0,Tt.jsx)("button",{onClick:n,className:"bg-purple-500 text-white px-8 py-3 rounded-lg hover:bg-purple-600 transition-colors",children:"Verstanden"})]})})}):null},Sn=e=>{let{isOpen:t,onClose:n,starsInSafe:r,onWithdraw:a}=e;const[s,o]=(0,l.useState)("");return t?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcb0"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-purple-800 mb-4",children:"Sternen-Tresor"}),(0,Tt.jsxs)("div",{className:"text-4xl font-bold text-yellow-600 mb-6",children:[r," \u2b50"]}),r>0&&(0,Tt.jsxs)("div",{className:"mb-6",children:[(0,Tt.jsx)("p",{className:"text-purple-600 mb-3",children:"Wie viele Sterne m\xf6chtest du herausnehmen?"}),(0,Tt.jsxs)("div",{className:"flex space-x-2",children:[(0,Tt.jsx)("input",{type:"number",min:"1",max:r,value:s,onChange:e=>o(e.target.value),className:"flex-1 p-3 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500",placeholder:"1-".concat(r)}),(0,Tt.jsx)("button",{onClick:async()=>{const e=parseInt(s);e>0&&e<=r&&(await a(e),o(""))},disabled:!s||parseInt(s)>r,className:"bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:"Herausnehmen"})]})]}),(0,Tt.jsx)("button",{onClick:n,className:"bg-purple-500 text-white px-8 py-3 rounded-lg hover:bg-purple-600 transition-colors",children:"Tresor Schlie\xdfen"})]})})}):null},jn=e=>{let{isOpen:t,onClose:n,onComplete:r}=e;const[a,s]=(0,l.useState)("settings"),[o,i]=(0,l.useState)({problem_count:15,star_tiers:{90:3,80:2,70:1},problem_types:{vocabulary_de_en:!0,vocabulary_en_de:!0,simple_sentences:!0,basic_grammar:!1,colors_numbers:!0,animals_objects:!0},difficulty_settings:{vocabulary_level:"basic",include_articles:!1,sentence_complexity:"simple"}}),[c,d]=(0,l.useState)({total_attempts:0,grade_2_attempts:0,grade_3_attempts:0,total_correct:0,total_wrong:0,average_score:0,best_score:0,total_stars_earned:0,problem_type_stats:{}}),[f,p]=(0,l.useState)(!1);(0,l.useEffect)((()=>{o&&console.log("\ud83d\udd0d DEBUG: English settings state updated:",JSON.stringify(o,null,2))}),[o]),(0,l.useEffect)((()=>{t&&(h(),m())}),[t]);const h=async()=>{try{let e;e=await hn(),i(e)}catch(e){console.error("Fehler beim Laden der Englisch-Einstellungen:",e)}},m=async()=>{try{const e=await Pt.get("".concat(gn,"/english/statistics"));d(e.data)}catch(e){console.error("Fehler beim Laden der Englisch-Statistiken:",e)}},g=(0,l.useCallback)((async()=>{p(!0);try{console.log("\ud83d\udd0d DEBUG: English settings being sent to API:",JSON.stringify(o,null,2)),await mn(o),console.log("\ud83c\uddec\ud83c\udde7 Mock: English settings updated"),r&&r(),alert("Englisch-Einstellungen erfolgreich gespeichert!")}catch(e){console.error("Fehler beim Speichern der Einstellungen:",e),alert("Fehler beim Speichern der Einstellungen!")}p(!1)}),[o,r]);return t?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-4xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-green-800",children:"Englisch-Herausforderung Einstellungen"}),(0,Tt.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Tt.jsxs)("div",{className:"flex space-x-4 mb-6 border-b",children:[(0,Tt.jsx)("button",{onClick:()=>s("settings"),className:"pb-2 px-4 font-semibold ".concat("settings"===a?"text-green-600 border-b-2 border-green-600":"text-gray-500 hover:text-green-500"),children:"\u2699\ufe0f Einstellungen"}),(0,Tt.jsx)("button",{onClick:()=>s("statistics"),className:"pb-2 px-4 font-semibold ".concat("statistics"===a?"text-green-600 border-b-2 border-green-600":"text-gray-500 hover:text-green-500"),children:"\ud83d\udcca Statistiken"})]}),"settings"===a&&(0,Tt.jsxs)("div",{className:"space-y-6",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"\ud83d\udcdd Aufgaben-Anzahl"}),(0,Tt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Tt.jsx)("label",{className:"font-medium",children:"Anzahl der Englisch-Aufgaben pro Herausforderung:"}),(0,Tt.jsx)("input",{type:"number",min:"10",max:"30",value:o.problem_count,onChange:e=>{const t=parseInt(e.target.value);console.log("\ud83d\udd0d DEBUG: English problem count input changed to:",t),i((e=>{const n=u(u({},e),{},{problem_count:t});return console.log("\ud83d\udd0d DEBUG: New English settings object in functional update:",JSON.stringify(n,null,2)),n}))},className:"w-20 p-2 border border-green-300 rounded focus:outline-none focus:border-green-500"})]})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"\ud83c\uddec\ud83c\udde7 Aufgaben-Typen"}),(0,Tt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"W\xe4hle die Arten von Englisch-Aufgaben aus:"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(o.problem_types).map((e=>{let[t,n]=e;return(0,Tt.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,Tt.jsx)("input",{type:"checkbox",checked:n,onChange:e=>{const n=e.target.checked;console.log("\ud83d\udd0d DEBUG: English problem type '".concat(t,"' changed to:"),n),i((e=>{const r=u(u({},e),{},{problem_types:u(u({},e.problem_types),{},{[t]:n})});return console.log("\ud83d\udd0d DEBUG: New English settings with problem type update:",JSON.stringify(r,null,2)),r}))},className:"w-4 h-4 text-green-600 rounded"}),(0,Tt.jsx)("span",{className:"text-sm",children:{vocabulary_de_en:"\ud83c\udde9\ud83c\uddea\u2192\ud83c\uddec\ud83c\udde7 Deutsch zu Englisch Vokabeln",vocabulary_en_de:"\ud83c\uddec\ud83c\udde7\u2192\ud83c\udde9\ud83c\uddea Englisch zu Deutsch Vokabeln",simple_sentences:"\ud83d\udcdd Einfache S\xe4tze \xfcbersetzen",basic_grammar:"\ud83d\udcd0 Grundlegende Grammatik",colors_numbers:"\ud83c\udfa8 Farben und Zahlen",animals_objects:"\ud83d\udc15 Tiere und Gegenst\xe4nde"}[t]||t})]},t)}))})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"\u2696\ufe0f Schwierigkeitseinstellungen"}),(0,Tt.jsxs)("div",{className:"space-y-4",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block font-medium mb-2",children:"Vokabel-Level:"}),(0,Tt.jsxs)("select",{value:o.difficulty_settings.vocabulary_level,onChange:e=>{const t=e.target.value;console.log("\ud83d\udd0d DEBUG: English vocabulary level changed to:",t),i((e=>{const n=u(u({},e),{},{difficulty_settings:u(u({},e.difficulty_settings),{},{vocabulary_level:t})});return console.log("\ud83d\udd0d DEBUG: New English settings with vocabulary level update:",JSON.stringify(n,null,2)),n}))},className:"p-2 border border-green-300 rounded focus:outline-none focus:border-green-500",children:[(0,Tt.jsx)("option",{value:"basic",children:"Grundwortschatz"}),(0,Tt.jsx)("option",{value:"intermediate",children:"Erweitert"})]})]}),(0,Tt.jsx)("div",{children:(0,Tt.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,Tt.jsx)("input",{type:"checkbox",checked:o.difficulty_settings.include_articles,onChange:e=>{const t=e.target.checked;console.log("\ud83d\udd0d DEBUG: English include_articles changed to:",t),i((e=>{const n=u(u({},e),{},{difficulty_settings:u(u({},e.difficulty_settings),{},{include_articles:t})});return console.log("\ud83d\udd0d DEBUG: New English settings with include_articles update:",JSON.stringify(n,null,2)),n}))},className:"w-4 h-4 text-green-600 rounded"}),(0,Tt.jsx)("span",{children:"Deutsche Artikel (der/die/das) mit einbeziehen"})]})}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block font-medium mb-2",children:"Satz-Komplexit\xe4t:"}),(0,Tt.jsxs)("select",{value:o.difficulty_settings.sentence_complexity,onChange:e=>i(u(u({},o),{},{difficulty_settings:u(u({},o.difficulty_settings),{},{sentence_complexity:e.target.value})})),className:"p-2 border border-green-300 rounded focus:outline-none focus:border-green-500",children:[(0,Tt.jsx)("option",{value:"simple",children:"Einfach"}),(0,Tt.jsx)("option",{value:"medium",children:"Mittel"})]})]})]})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"\u2b50 Sternen-Belohnungs-Stufen"}),(0,Tt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Bestimme, wie viele Sterne basierend auf der Prozentscore vergeben werden"}),(0,Tt.jsx)("div",{className:"space-y-3",children:Object.entries(o.star_tiers).map((e=>{let[t,n]=e;return(0,Tt.jsxs)("div",{className:"flex items-center space-x-3 bg-green-50 p-3 rounded-lg",children:[(0,Tt.jsxs)("span",{className:"font-medium",children:[t,"% oder h\xf6her:"]}),(0,Tt.jsx)("input",{type:"number",value:n,onChange:e=>((e,t)=>{const n=u({},o.star_tiers);n[e]=t,i(u(u({},o),{},{star_tiers:n}))})(t,parseInt(e.target.value)),className:"w-20 p-2 border border-green-300 rounded focus:outline-none focus:border-green-500"}),(0,Tt.jsx)("span",{children:"\u2b50 Sterne"}),(0,Tt.jsx)("button",{onClick:()=>(e=>{const t=u({},o.star_tiers);delete t[e],i(u(u({},o),{},{star_tiers:t}))})(t),className:"text-red-500 hover:text-red-700",children:"\u2715"})]},t)}))}),(0,Tt.jsx)("button",{onClick:()=>{const e=prompt("Prozentsatz eingeben (z.B. 95):"),t=prompt("Anzahl Sterne eingeben:");if(e&&t){const n=u({},o.star_tiers);n[e]=parseInt(t),i(u(u({},o),{},{star_tiers:n}))}},className:"mt-3 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"+ Stufe Hinzuf\xfcgen"})]}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:n,className:"px-6 py-2 border border-green-300 text-green-600 rounded-lg hover:bg-green-50 transition-colors",children:"Abbrechen"}),(0,Tt.jsx)("button",{onClick:g,disabled:f,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:f?"Speichern...":"Einstellungen Speichern"})]})]}),"statistics"===a&&(0,Tt.jsxs)("div",{className:"space-y-6",children:[(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Tt.jsxs)("div",{className:"stats-card stats-card-total",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Gesamt Versuche"}),(0,Tt.jsx)("p",{className:"text-3xl font-bold",children:c.total_attempts})]}),(0,Tt.jsxs)("div",{className:"stats-card stats-card-completed",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Durchschnittsscore"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[c.average_score.toFixed(1),"%"]})]}),(0,Tt.jsxs)("div",{className:"stats-card stats-card-pending",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Bester Score"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[c.best_score.toFixed(1),"%"]})]}),(0,Tt.jsxs)("div",{className:"stats-card",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Verdiente Sterne"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[c.total_stars_earned," \u2b50"]})]})]}),(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"\ud83d\udcda Klassen-Aufschl\xfcsselung"}),(0,Tt.jsxs)("div",{className:"space-y-3",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Klasse 2 Versuche:"}),(0,Tt.jsx)("span",{className:"font-semibold",children:c.grade_2_attempts})]}),(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Klasse 3 Versuche:"}),(0,Tt.jsx)("span",{className:"font-semibold",children:c.grade_3_attempts})]})]})]}),(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"\ud83c\udfaf Antworten-Aufschl\xfcsselung"}),(0,Tt.jsxs)("div",{className:"space-y-3",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{className:"text-green-600",children:"\u2705 Richtige Antworten:"}),(0,Tt.jsx)("span",{className:"font-semibold text-green-600",children:c.total_correct})]}),(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{className:"text-red-600",children:"\u274c Falsche Antworten:"}),(0,Tt.jsx)("span",{className:"font-semibold text-red-600",children:c.total_wrong})]}),(0,Tt.jsx)("div",{className:"pt-2 border-t",children:(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Genauigkeitsrate:"}),(0,Tt.jsxs)("span",{className:"font-semibold",children:[c.total_correct+c.total_wrong>0?(c.total_correct/(c.total_correct+c.total_wrong)*100).toFixed(1):0,"%"]})]})})]})]})]}),Object.keys(c.problem_type_stats).length>0&&(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"\ud83d\udcca Aufgaben-Typ Statistiken"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(c.problem_type_stats).map((e=>{let[t,n]=e;const r=n.total_attempts>0?(n.correct/n.total_attempts*100).toFixed(1):0;return(0,Tt.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Tt.jsx)("h4",{className:"font-semibold text-green-800",children:{vocabulary_de_en:"DE\u2192EN Vokabeln",vocabulary_en_de:"EN\u2192DE Vokabeln",simple_sentences:"Einfache S\xe4tze",basic_grammar:"Grundgrammatik",colors_numbers:"Farben & Zahlen",animals_objects:"Tiere & Objekte"}[t]||t}),(0,Tt.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Tt.jsxs)("div",{children:["Versuche: ",n.total_attempts]}),(0,Tt.jsxs)("div",{className:"text-green-600",children:["Richtig: ",n.correct]}),(0,Tt.jsxs)("div",{className:"text-red-600",children:["Falsch: ",n.wrong]}),(0,Tt.jsxs)("div",{children:["Genauigkeit: ",r,"%"]})]})]},t)}))})]}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:async()=>{if(confirm("Bist du sicher, dass du alle Englisch-Statistiken zur\xfccksetzen m\xf6chtest? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden!"))try{await Pt.post("".concat(gn,"/english/statistics/reset")),await m(),alert("Englisch-Statistiken erfolgreich zur\xfcckgesetzt!")}catch(e){console.error("Fehler beim Zur\xfccksetzen der Statistiken:",e),alert("Fehler beim Zur\xfccksetzen der Statistiken!")}},className:"bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Statistiken Zur\xfccksetzen"}),(0,Tt.jsx)("button",{onClick:n,className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Schlie\xdfen"})]})]})]})}):null},Nn=e=>{let{isOpen:t,onClose:n,onComplete:r}=e;const[a,s]=(0,l.useState)("settings"),[o,i]=(0,l.useState)({problem_count:20,star_tiers:{90:3,80:2,70:1},problem_types:{spelling:!0,word_types:!0,fill_blank:!0,grammar:!1,articles:!1,sentence_order:!1},difficulty_settings:{spelling_difficulty:"medium",word_types_include_adjectives:!0,fill_blank_context_length:"short"}}),[c,d]=(0,l.useState)({total_attempts:0,grade_2_attempts:0,grade_3_attempts:0,total_correct:0,total_wrong:0,average_score:0,best_score:0,total_stars_earned:0,problem_type_stats:{}}),[f,p]=(0,l.useState)(!1);(0,l.useEffect)((()=>{o&&console.log("\ud83d\udd0d DEBUG: German settings state updated:",JSON.stringify(o,null,2))}),[o]),(0,l.useEffect)((()=>{t&&(h(),m())}),[t]);const h=async()=>{try{{const e=await fn();i(e),console.log("\ud83c\udde9\ud83c\uddea Mock: German settings loaded:",e)}}catch(e){console.error("Fehler beim Laden der Deutsch-Einstellungen:",e)}},m=async()=>{try{const e=await Pt.get("".concat(gn,"/german/statistics"));d(e.data)}catch(e){console.error("Fehler beim Laden der Deutsch-Statistiken:",e)}},g=(0,l.useCallback)((async()=>{p(!0);try{console.log("\ud83d\udd0d DEBUG: German settings being sent to API:",JSON.stringify(o,null,2)),await pn(o),console.log("\ud83c\udde9\ud83c\uddea Mock: German settings updated"),r&&r(),alert("Deutsch-Einstellungen erfolgreich gespeichert!")}catch(e){console.error("Fehler beim Speichern der Einstellungen:",e),alert("Fehler beim Speichern der Einstellungen!")}p(!1)}),[o,r]);return t?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-4xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-blue-800",children:"Deutsch-Herausforderung Einstellungen"}),(0,Tt.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Tt.jsxs)("div",{className:"flex space-x-4 mb-6 border-b",children:[(0,Tt.jsx)("button",{onClick:()=>s("settings"),className:"pb-2 px-4 font-semibold ".concat("settings"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-blue-500"),children:"\u2699\ufe0f Einstellungen"}),(0,Tt.jsx)("button",{onClick:()=>s("statistics"),className:"pb-2 px-4 font-semibold ".concat("statistics"===a?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-blue-500"),children:"\ud83d\udcca Statistiken"})]}),"settings"===a&&(0,Tt.jsxs)("div",{className:"space-y-6",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"\ud83d\udcdd Aufgaben-Anzahl"}),(0,Tt.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Tt.jsx)("label",{className:"font-medium",children:"Anzahl der Deutsch-Aufgaben pro Herausforderung:"}),(0,Tt.jsx)("input",{type:"number",min:"10",max:"50",value:o.problem_count,onChange:e=>{const t=parseInt(e.target.value);console.log("\ud83d\udd0d DEBUG: German problem count input changed to:",t),i((e=>{const n=u(u({},e),{},{problem_count:t});return console.log("\ud83d\udd0d DEBUG: New German settings object in functional update:",JSON.stringify(n,null,2)),n}))},className:"w-20 p-2 border border-blue-300 rounded focus:outline-none focus:border-blue-500"})]})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"\ud83d\udcda Aufgaben-Typen"}),(0,Tt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"W\xe4hle die Arten von Deutsch-Aufgaben aus:"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(o.problem_types).map((e=>{let[t,n]=e;return(0,Tt.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,Tt.jsx)("input",{type:"checkbox",checked:n,onChange:e=>{const n=e.target.checked;console.log("\ud83d\udd0d DEBUG: German problem type '".concat(t,"' changed to:"),n),i((e=>{const r=u(u({},e),{},{problem_types:u(u({},e.problem_types),{},{[t]:n})});return console.log("\ud83d\udd0d DEBUG: New German settings with problem type update:",JSON.stringify(r,null,2)),r}))},className:"w-4 h-4 text-blue-600 rounded"}),(0,Tt.jsx)("span",{children:{spelling:"\u270f\ufe0f Rechtschreibung",word_types:"\ud83d\udd24 Wortarten (Nomen, Verben, Adjektive)",fill_blank:"\ud83d\udccb L\xfcckentexte",grammar:"\ud83d\udcd0 Grammatik",articles:"\ud83d\udcc4 Artikel (der, die, das)",sentence_order:"\ud83d\udd22 Satzstellung"}[t]||t})]},t)}))})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"\u2696\ufe0f Schwierigkeitseinstellungen"}),(0,Tt.jsxs)("div",{className:"space-y-4",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block font-medium mb-2",children:"Rechtschreibung Schwierigkeit:"}),(0,Tt.jsxs)("select",{value:o.difficulty_settings.spelling_difficulty,onChange:e=>i(u(u({},o),{},{difficulty_settings:u(u({},o.difficulty_settings),{},{spelling_difficulty:e.target.value})})),className:"p-2 border border-blue-300 rounded focus:outline-none focus:border-blue-500",children:[(0,Tt.jsx)("option",{value:"easy",children:"Einfach"}),(0,Tt.jsx)("option",{value:"medium",children:"Mittel"}),(0,Tt.jsx)("option",{value:"hard",children:"Schwer"})]})]}),(0,Tt.jsx)("div",{children:(0,Tt.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,Tt.jsx)("input",{type:"checkbox",checked:o.difficulty_settings.word_types_include_adjectives,onChange:e=>i(u(u({},o),{},{difficulty_settings:u(u({},o.difficulty_settings),{},{word_types_include_adjectives:e.target.checked})})),className:"w-4 h-4 text-blue-600 rounded"}),(0,Tt.jsx)("span",{children:"Adjektive in Wortarten-Aufgaben einschlie\xdfen"})]})}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block font-medium mb-2",children:"L\xfcckentext Kontext-L\xe4nge:"}),(0,Tt.jsxs)("select",{value:o.difficulty_settings.fill_blank_context_length,onChange:e=>i(u(u({},o),{},{difficulty_settings:u(u({},o.difficulty_settings),{},{fill_blank_context_length:e.target.value})})),className:"p-2 border border-blue-300 rounded focus:outline-none focus:border-blue-500",children:[(0,Tt.jsx)("option",{value:"short",children:"Kurz"}),(0,Tt.jsx)("option",{value:"medium",children:"Mittel"}),(0,Tt.jsx)("option",{value:"long",children:"Lang"})]})]})]})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"\u2b50 Sternen-Belohnungs-Stufen"}),(0,Tt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Bestimme, wie viele Sterne basierend auf der Prozentscore vergeben werden"}),(0,Tt.jsx)("div",{className:"space-y-3",children:Object.entries(o.star_tiers).map((e=>{let[t,n]=e;return(0,Tt.jsxs)("div",{className:"flex items-center space-x-3 bg-blue-50 p-3 rounded-lg",children:[(0,Tt.jsxs)("span",{className:"font-medium",children:[t,"% oder h\xf6her:"]}),(0,Tt.jsx)("input",{type:"number",value:n,onChange:e=>((e,t)=>{i((n=>{const r=u({},n.star_tiers);r[e]=t;const l=u(u({},n),{},{star_tiers:r});return console.log("\ud83d\udd0d DEBUG: German star tier updated:",JSON.stringify(l,null,2)),l}))})(t,parseInt(e.target.value)),className:"w-20 p-2 border border-blue-300 rounded focus:outline-none focus:border-blue-500"}),(0,Tt.jsx)("span",{children:"\u2b50 Sterne"}),(0,Tt.jsx)("button",{onClick:()=>(e=>{i((t=>{const n=u({},t.star_tiers);delete n[e];const r=u(u({},t),{},{star_tiers:n});return console.log("\ud83d\udd0d DEBUG: German star tier removed:",JSON.stringify(r,null,2)),r}))})(t),className:"text-red-500 hover:text-red-700",children:"\u2715"})]},t)}))}),(0,Tt.jsx)("button",{onClick:()=>{const e=prompt("Prozentsatz eingeben (z.B. 95):"),t=prompt("Anzahl Sterne eingeben:");if(e&&t){const n=u({},o.star_tiers);n[e]=parseInt(t),i(u(u({},o),{},{star_tiers:n}))}},className:"mt-3 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"+ Stufe Hinzuf\xfcgen"})]}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:n,className:"px-6 py-2 border border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors",children:"Abbrechen"}),(0,Tt.jsx)("button",{onClick:g,disabled:f,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:f?"Speichern...":"Einstellungen Speichern"})]})]}),"statistics"===a&&(0,Tt.jsxs)("div",{className:"space-y-6",children:[(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Tt.jsxs)("div",{className:"stats-card stats-card-total",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Gesamt Versuche"}),(0,Tt.jsx)("p",{className:"text-3xl font-bold",children:c.total_attempts})]}),(0,Tt.jsxs)("div",{className:"stats-card stats-card-completed",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Durchschnittsscore"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[c.average_score.toFixed(1),"%"]})]}),(0,Tt.jsxs)("div",{className:"stats-card stats-card-pending",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Bester Score"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[c.best_score.toFixed(1),"%"]})]}),(0,Tt.jsxs)("div",{className:"stats-card",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Verdiente Sterne"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[c.total_stars_earned," \u2b50"]})]})]}),(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"\ud83d\udcda Klassen-Aufschl\xfcsselung"}),(0,Tt.jsxs)("div",{className:"space-y-3",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Klasse 2 Versuche:"}),(0,Tt.jsx)("span",{className:"font-semibold",children:c.grade_2_attempts})]}),(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Klasse 3 Versuche:"}),(0,Tt.jsx)("span",{className:"font-semibold",children:c.grade_3_attempts})]})]})]}),(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"\ud83c\udfaf Antworten-Aufschl\xfcsselung"}),(0,Tt.jsxs)("div",{className:"space-y-3",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{className:"text-green-600",children:"\u2705 Richtige Antworten:"}),(0,Tt.jsx)("span",{className:"font-semibold text-green-600",children:c.total_correct})]}),(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{className:"text-red-600",children:"\u274c Falsche Antworten:"}),(0,Tt.jsx)("span",{className:"font-semibold text-red-600",children:c.total_wrong})]}),(0,Tt.jsx)("div",{className:"pt-2 border-t",children:(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Genauigkeitsrate:"}),(0,Tt.jsxs)("span",{className:"font-semibold",children:[c.total_correct+c.total_wrong>0?(c.total_correct/(c.total_correct+c.total_wrong)*100).toFixed(1):0,"%"]})]})})]})]})]}),Object.keys(c.problem_type_stats).length>0&&(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"\ud83d\udcca Aufgaben-Typ Statistiken"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(c.problem_type_stats).map((e=>{let[t,n]=e;const r=n.total_attempts>0?(n.correct/n.total_attempts*100).toFixed(1):0;return(0,Tt.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Tt.jsx)("h4",{className:"font-semibold text-blue-800",children:{spelling:"Rechtschreibung",word_types:"Wortarten",fill_blank:"L\xfcckentexte",grammar:"Grammatik",articles:"Artikel",sentence_order:"Satzstellung"}[t]||t}),(0,Tt.jsxs)("div",{className:"text-sm space-y-1",children:[(0,Tt.jsxs)("div",{children:["Versuche: ",n.total_attempts]}),(0,Tt.jsxs)("div",{className:"text-green-600",children:["Richtig: ",n.correct]}),(0,Tt.jsxs)("div",{className:"text-red-600",children:["Falsch: ",n.wrong]}),(0,Tt.jsxs)("div",{children:["Genauigkeit: ",r,"%"]})]})]},t)}))})]}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:async()=>{if(confirm("Bist du sicher, dass du alle Deutsch-Statistiken zur\xfccksetzen m\xf6chtest? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden!"))try{await Pt.post("".concat(gn,"/german/statistics/reset")),await m(),alert("Deutsch-Statistiken erfolgreich zur\xfcckgesetzt!")}catch(e){console.error("Fehler beim Zur\xfccksetzen der Statistiken:",e),alert("Fehler beim Zur\xfccksetzen der Statistiken!")}},className:"bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Statistiken Zur\xfccksetzen"}),(0,Tt.jsx)("button",{onClick:n,className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Schlie\xdfen"})]})]})]})}):null},_n=e=>{var t,n,r,a;let{isOpen:s,onClose:o,onComplete:i}=e;const[c,d]=(0,l.useState)(null),[f,p]=(0,l.useState)(null),[h,m]=(0,l.useState)(!1),[g,b]=(0,l.useState)("settings");(0,l.useEffect)((()=>{c&&console.log("\ud83d\udd0d DEBUG: Settings state updated:",JSON.stringify(c,null,2))}),[c]),(0,l.useEffect)((()=>{s&&y()}),[s]);const y=async()=>{try{{const[e,t]=await Promise.all([un(),Promise.resolve({total_attempts:5,grade_2_attempts:3,grade_3_attempts:2,total_correct:8,total_wrong:2,average_score:80,best_score:95,total_stars_earned:12})]);d(e),p(t)}}catch(e){console.error("Fehler beim Laden der Mathe-Daten:",e)}},v=(0,l.useCallback)((async()=>{m(!0);try{console.log("\ud83d\udd0d DEBUG: Settings being sent to API:",JSON.stringify(c,null,2)),await dn(c),console.log("\ud83e\uddee Mock: Math settings updated in modal"),i(),alert("Einstellungen erfolgreich gespeichert!")}catch(e){console.error("Fehler beim Aktualisieren der Einstellungen:",e)}m(!1)}),[c,i]),x=(e,t)=>{const n=u({},c.star_tiers);n[e]=t,d(u(u({},c),{},{star_tiers:n}))};return s&&c&&f?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-5xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-purple-800",children:"Mathe-Herausforderung Einstellungen"}),(0,Tt.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\u2715"})]}),(0,Tt.jsxs)("div",{className:"flex mb-6 border-b border-purple-200",children:[(0,Tt.jsx)("button",{onClick:()=>b("settings"),className:"py-2 px-4 font-medium transition-colors ".concat("settings"===g?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-purple-600"),children:"\u2699\ufe0f Einstellungen"}),(0,Tt.jsx)("button",{onClick:()=>b("statistics"),className:"py-2 px-4 font-medium transition-colors ".concat("statistics"===g?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:text-purple-600"),children:"\ud83d\udcca Statistiken"})]}),"settings"===g&&(0,Tt.jsxs)("div",{className:"space-y-6",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-purple-800 mb-3",children:"\ud83e\uddee Aufgaben-Typen"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(c.problem_types||{}).map((e=>{let[t,n]=e;return(0,Tt.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[(0,Tt.jsx)("input",{type:"checkbox",checked:n,onChange:e=>((e,t)=>{const n=u({},c.problem_types);n[e]=t,d(u(u({},c),{},{problem_types:n}))})(t,e.target.checked),className:"w-5 h-5 text-purple-600 rounded"}),(0,Tt.jsx)("span",{className:"font-medium",children:{addition:"\u2795 Addition",subtraction:"\u2796 Subtraktion",multiplication:"\u2716\ufe0f Multiplikation",clock_reading:"\ud83d\udd50 Uhrzeiten ablesen",currency_math:"\ud83d\udcb0 W\xe4hrungsrechnungen",word_problems:"\ud83d\udcdd Textaufgaben"}[t]||t})]},t)}))})]}),(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block text-sm font-medium text-purple-800 mb-2",children:"Anzahl Aufgaben pro Herausforderung"}),(0,Tt.jsx)("input",{type:"number",min:"10",max:"50",value:c.problem_count,onChange:e=>{const t=parseInt(e.target.value);console.log("\ud83d\udd0d DEBUG: Problem count input changed to:",t),d((e=>{const n=u(u({},e),{},{problem_count:t});return console.log("\ud83d\udd0d DEBUG: New settings object in functional update:",JSON.stringify(n,null,2)),n}))},className:"w-full p-3 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"}),(0,Tt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Standard: 30 Aufgaben"})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block text-sm font-medium text-purple-800 mb-2",children:"Maximale Zahl (Addition/Subtraktion)"}),(0,Tt.jsx)("input",{type:"number",value:c.max_number,onChange:e=>d(u(u({},c),{},{max_number:parseInt(e.target.value)})),className:"w-full p-3 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block text-sm font-medium text-purple-800 mb-2",children:"Maximale Multiplikationstabelle"}),(0,Tt.jsx)("input",{type:"number",value:c.max_multiplication,onChange:e=>d(u(u({},c),{},{max_multiplication:parseInt(e.target.value)})),className:"w-full p-3 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"})]})]}),(null===(t=c.problem_types)||void 0===t?void 0:t.currency_math)&&(0,Tt.jsxs)("div",{className:"border border-purple-200 rounded-lg p-4",children:[(0,Tt.jsx)("h4",{className:"text-md font-semibold text-purple-800 mb-3",children:"\ud83d\udcb0 W\xe4hrungs-Einstellungen"}),(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block text-sm font-medium text-purple-800 mb-2",children:"W\xe4hrungssymbol"}),(0,Tt.jsx)("input",{type:"text",value:(null===(n=c.currency_settings)||void 0===n?void 0:n.currency_symbol)||"\u20ac",onChange:e=>{const t=e.target.value;console.log("\ud83d\udd0d DEBUG: Math currency symbol changed to:",t),d((e=>{const n=u(u({},e),{},{currency_settings:u(u({},e.currency_settings),{},{currency_symbol:t})});return console.log("\ud83d\udd0d DEBUG: New Math settings with currency symbol update:",JSON.stringify(n,null,2)),n}))},className:"w-full p-2 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("label",{className:"block text-sm font-medium text-purple-800 mb-2",children:"Maximaler Betrag"}),(0,Tt.jsx)("input",{type:"number",step:"0.01",value:(null===(r=c.currency_settings)||void 0===r?void 0:r.max_amount)||20,onChange:e=>{const t=parseFloat(e.target.value);console.log("\ud83d\udd0d DEBUG: Math currency max amount changed to:",t),d((e=>{const n=u(u({},e),{},{currency_settings:u(u({},e.currency_settings),{},{max_amount:t})});return console.log("\ud83d\udd0d DEBUG: New Math settings with currency max amount update:",JSON.stringify(n,null,2)),n}))},className:"w-full p-2 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"})]})]})]}),(null===(a=c.problem_types)||void 0===a?void 0:a.clock_reading)&&(0,Tt.jsxs)("div",{className:"border border-purple-200 rounded-lg p-4",children:[(0,Tt.jsx)("h4",{className:"text-md font-semibold text-purple-800 mb-3",children:"\ud83d\udd50 Uhrzeiten-Einstellungen"}),(0,Tt.jsx)("div",{className:"space-y-3",children:Object.entries(c.clock_settings||{}).map((e=>{let[t,n]=e;const r={include_half_hours:"Halbe Stunden (X:30)",include_quarter_hours:"Viertelstunden (X:15, X:45)",include_five_minute_intervals:"5-Minuten-Schritte"};return"boolean"===typeof n?(0,Tt.jsxs)("label",{className:"flex items-center space-x-3",children:[(0,Tt.jsx)("input",{type:"checkbox",checked:n,onChange:e=>{const n=e.target.checked;console.log("\ud83d\udd0d DEBUG: Math clock setting '".concat(t,"' changed to:"),n),d((e=>{const r=u(u({},e),{},{clock_settings:u(u({},e.clock_settings),{},{[t]:n})});return console.log("\ud83d\udd0d DEBUG: New Math settings with clock setting update:",JSON.stringify(r,null,2)),r}))},className:"w-4 h-4 text-purple-600 rounded"}),(0,Tt.jsx)("span",{children:r[t]||t})]},t):null}))})]}),(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-purple-800 mb-3",children:"\u2b50 Sternen-Belohnungs-Stufen"}),(0,Tt.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Bestimme, wie viele Sterne basierend auf der Prozentscore vergeben werden"}),(0,Tt.jsx)("div",{className:"space-y-3",children:Object.entries(c.star_tiers).map((e=>{let[t,n]=e;return(0,Tt.jsxs)("div",{className:"flex items-center space-x-3 bg-purple-50 p-3 rounded-lg",children:[(0,Tt.jsxs)("span",{className:"font-medium",children:[t,"% oder h\xf6her:"]}),(0,Tt.jsx)("input",{type:"number",value:n,onChange:e=>x(t,parseInt(e.target.value)),className:"w-20 p-2 border border-purple-300 rounded focus:outline-none focus:border-purple-500"}),(0,Tt.jsx)("span",{children:"\u2b50 Sterne"}),(0,Tt.jsx)("button",{onClick:()=>(e=>{const t=u({},c.star_tiers);delete t[e],d(u(u({},c),{},{star_tiers:t}))})(t),className:"text-red-500 hover:text-red-700",children:"\u2715"})]},t)}))}),(0,Tt.jsx)("button",{onClick:()=>{const e=prompt("Gib die Prozentschwelle ein (z.B. 85):"),t=prompt("Gib die Anzahl der zu vergebenden Sterne ein:");e&&t&&x(e,parseInt(t))},className:"mt-3 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"+ Stufe Hinzuf\xfcgen"})]}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:o,className:"px-6 py-2 border border-purple-300 text-purple-600 rounded-lg hover:bg-purple-50 transition-colors",children:"Abbrechen"}),(0,Tt.jsx)("button",{onClick:v,disabled:h,className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:h?"Speichern...":"Einstellungen Speichern"})]})]}),"statistics"===g&&(0,Tt.jsxs)("div",{className:"space-y-6",children:[(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Tt.jsxs)("div",{className:"stats-card stats-card-total",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Gesamt Versuche"}),(0,Tt.jsx)("p",{className:"text-3xl font-bold",children:f.total_attempts})]}),(0,Tt.jsxs)("div",{className:"stats-card stats-card-completed",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Durchschnittsscore"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[f.average_score.toFixed(1),"%"]})]}),(0,Tt.jsxs)("div",{className:"stats-card stats-card-pending",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Bester Score"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[f.best_score.toFixed(1),"%"]})]}),(0,Tt.jsxs)("div",{className:"stats-card",children:[(0,Tt.jsx)("h3",{className:"font-semibold mb-2",children:"Verdiente Sterne"}),(0,Tt.jsxs)("p",{className:"text-3xl font-bold",children:[f.total_stars_earned," \u2b50"]})]})]}),(0,Tt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"\ud83d\udcda Klassen-Aufschl\xfcsselung"}),(0,Tt.jsxs)("div",{className:"space-y-3",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Klasse 2 Versuche:"}),(0,Tt.jsx)("span",{className:"font-semibold",children:f.grade_2_attempts})]}),(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Klasse 3 Versuche:"}),(0,Tt.jsx)("span",{className:"font-semibold",children:f.grade_3_attempts})]})]})]}),(0,Tt.jsxs)("div",{className:"card",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"\ud83c\udfaf Antworten-Aufschl\xfcsselung"}),(0,Tt.jsxs)("div",{className:"space-y-3",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{className:"text-green-600",children:"\u2705 Richtige Antworten:"}),(0,Tt.jsx)("span",{className:"font-semibold text-green-600",children:f.total_correct})]}),(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{className:"text-red-600",children:"\u274c Falsche Antworten:"}),(0,Tt.jsx)("span",{className:"font-semibold text-red-600",children:f.total_wrong})]}),(0,Tt.jsx)("div",{className:"pt-2 border-t",children:(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsx)("span",{children:"Genauigkeitsrate:"}),(0,Tt.jsxs)("span",{className:"font-semibold",children:[f.total_correct+f.total_wrong>0?(f.total_correct/(f.total_correct+f.total_wrong)*100).toFixed(1):0,"%"]})]})})]})]})]}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:async()=>{if(confirm("Bist du sicher, dass du alle Mathe-Statistiken zur\xfccksetzen m\xf6chtest?"))try{await Pt.post("".concat(gn,"/math/statistics/reset")),y(),alert("Statistiken erfolgreich zur\xfcckgesetzt!")}catch(e){console.error("Fehler beim Zur\xfccksetzen der Statistiken:",e)}},className:"bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Statistiken Zur\xfccksetzen"}),(0,Tt.jsx)("button",{onClick:o,className:"bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-colors",children:"Schlie\xdfen"})]})]})]})}):null},En=e=>{let{onClose:t,onComplete:n}=e;const[r,a]=(0,l.useState)(null),[s,o]=(0,l.useState)(null),[i,c]=(0,l.useState)({}),[d,f]=(0,l.useState)(null),[p,h]=(0,l.useState)(!1),[m,g]=(0,l.useState)(!1),b=async e=>{g(!0);try{var t;let n;n=await cn(e),console.log("\ud83c\uddec\ud83c\udde7 Mock: English challenge created with settings");const r=n.challenge||(null===(t=n.data)||void 0===t?void 0:t.challenge)||n.data;o(r),a(e),c({})}catch(n){console.error("Fehler beim Erstellen der Englisch-Herausforderung:",n),alert("Fehler beim Erstellen der Englisch-Herausforderung. Bitte versuche es erneut.")}g(!1)},y=async()=>{if(s){g(!0);try{const e=await Pt.post("".concat(gn,"/english/challenge/").concat(s.id,"/submit"),i);f(e.data),h(!0)}catch(e){console.error("Fehler beim Einreichen der Antworten:",e),alert("Fehler beim Einreichen der Antworten. Bitte versuche es erneut.")}g(!1)}},v=s&&s.problems&&Array.isArray(s.problems)&&Object.keys(i).length===s.problems.length&&s.problems.every(((e,t)=>void 0!==i[t]&&""!==i[t]));return p&&d?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-4xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"text-center mb-6",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-green-800 mb-4",children:"Excellent English Work!"}),(0,Tt.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,Tt.jsxs)("p",{children:["Richtige Antworten: ",d.correct_answers,"/",d.total_problems]}),(0,Tt.jsxs)("p",{children:["Score: ",d.percentage.toFixed(1),"%"]}),(0,Tt.jsxs)("p",{className:"text-lg font-semibold text-yellow-600",children:["Verdiente Sterne: ",d.stars_earned," \u2b50"]})]})]}),(0,Tt.jsxs)("div",{className:"mb-6",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"\xdcberpr\xfcfe deine Englisch-Antworten:"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.challenge.problems.map(((e,t)=>(0,Tt.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat(e.is_correct?"bg-green-50 border-green-300":"bg-red-50 border-red-300"),children:[(0,Tt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Tt.jsx)("span",{className:"text-lg mr-2",children:e.is_correct?"\u2705":"\u274c"}),(0,Tt.jsxs)("span",{className:"font-medium",children:["Aufgabe ",t+1]})]}),(0,Tt.jsx)("p",{className:"mb-2 font-medium whitespace-pre-line",children:e.question}),e.options&&(0,Tt.jsxs)("div",{className:"mb-2 text-sm",children:[(0,Tt.jsx)("p",{className:"font-medium",children:"Optionen:"}),(0,Tt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.options.map(((t,n)=>(0,Tt.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(t===e.correct_answer?"bg-green-100 text-green-800":t===e.user_answer?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"),children:t},n)))})]}),(0,Tt.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,Tt.jsxs)("p",{children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Deine Antwort:"})," ",e.user_answer]}),!e.is_correct&&(0,Tt.jsxs)("p",{className:"text-green-600",children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Richtige Antwort:"})," ",e.correct_answer]})]})]},t)))})]}),(0,Tt.jsx)("div",{className:"text-center",children:(0,Tt.jsx)("button",{onClick:()=>{n(),t()},className:"bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 transition-colors text-lg",children:"Great! Weiter"})})]})}):d&&!p?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-green-800 mb-4",children:"Excellent English Work!"}),(0,Tt.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,Tt.jsxs)("p",{children:["Richtige Antworten: ",d.correct_answers,"/",d.total_problems]}),(0,Tt.jsxs)("p",{children:["Score: ",d.percentage.toFixed(1),"%"]}),(0,Tt.jsxs)("p",{className:"text-lg font-semibold text-yellow-600",children:["Verdiente Sterne: ",d.stars_earned," \u2b50"]})]}),(0,Tt.jsxs)("div",{className:"flex space-x-4",children:[(0,Tt.jsx)("button",{onClick:()=>h(!0),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Antworten \xdcberpr\xfcfen"}),(0,Tt.jsx)("button",{onClick:()=>{n(),t()},className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"Weiter"})]})]})})}):s?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-3xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Tt.jsxs)("h2",{className:"text-xl font-bold text-green-800",children:["Englisch Klasse ",r," Herausforderung"]}),(0,Tt.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Tt.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["F\xfclle ALLE Antworten aus, um die Einreichung zu aktivieren. Antworten ausgef\xfcllt: ",Object.keys(i).length,"/",s.problems?s.problems.length:0,(0,Tt.jsx)("br",{}),(0,Tt.jsxs)("span",{className:"text-green-600 font-medium",children:["Insgesamt ",s.problems?s.problems.length:0," English Aufgaben"]})]}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 gap-4 mb-6",children:s.problems.map(((e,t)=>(0,Tt.jsxs)("div",{className:"p-4 border-2 rounded-lg transition-colors ".concat(void 0!==i[t]&&""!==i[t]?"border-green-300 bg-green-50":"border-green-200 bg-white"),children:[(0,Tt.jsxs)("p",{className:"mb-3 font-medium whitespace-pre-line",children:[t+1,". ",e.question]}),e.options&&e.options.length>0&&(0,Tt.jsx)("div",{className:"space-y-2",children:e.options.map(((e,n)=>(0,Tt.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-green-50 p-2 rounded",children:[(0,Tt.jsx)("input",{type:"radio",name:"question-".concat(t),value:e,checked:i[t]===e,onChange:e=>{c(u(u({},i),{},{[t]:e.target.value}))},className:"w-4 h-4 text-green-600"}),(0,Tt.jsx)("span",{className:"text-sm",children:e})]},n)))}),(!e.options||0===e.options.length)&&(0,Tt.jsx)("input",{type:"text",className:"w-full p-2 border border-green-300 rounded focus:outline-none focus:border-green-500",placeholder:"Deine Antwort",value:i[t]||"",onChange:e=>{c(u(u({},i),{},{[t]:e.target.value}))}})]},t)))}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:t,className:"px-6 py-2 border border-green-300 text-green-600 rounded-lg hover:bg-green-50 transition-colors",children:"Abbrechen"}),(0,Tt.jsx)("button",{onClick:y,disabled:m||!v,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Einreichen...":"Alle Antworten Einreichen (".concat(Object.keys(i).length,"/").concat(s.problems?s.problems.length:0,")")})]})]})}):(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-green-800 mb-6",children:"Verdiene Extra-Sterne mit Englisch!"}),(0,Tt.jsx)("p",{className:"text-gray-600 mb-6",children:"W\xe4hle deine Englisch-Klassenstufe:"}),(0,Tt.jsxs)("div",{className:"space-y-4",children:[(0,Tt.jsx)("button",{onClick:()=>b(2),disabled:m,className:"w-full p-4 bg-gradient-to-r from-green-400 to-teal-400 text-white rounded-xl hover:from-green-500 hover:to-teal-500 transition-all disabled:opacity-50",children:"\ud83c\uddec\ud83c\udde7 Englisch Klasse 2"}),(0,Tt.jsx)("button",{onClick:()=>b(3),disabled:m,className:"w-full p-4 bg-gradient-to-r from-emerald-400 to-green-400 text-white rounded-xl hover:from-emerald-500 hover:to-green-500 transition-all disabled:opacity-50",children:"\ud83c\uddfa\ud83c\uddf8 Englisch Klasse 3"})]}),(0,Tt.jsx)("button",{onClick:t,className:"mt-4 text-green-600 hover:text-green-800 transition-colors",children:"Vielleicht Sp\xe4ter"})]})})})},Cn=e=>{let{onClose:t,onComplete:n}=e;const[r,a]=(0,l.useState)(null),[s,o]=(0,l.useState)(null),[i,c]=(0,l.useState)({}),[d,f]=(0,l.useState)(null),[p,h]=(0,l.useState)(!1),[m,g]=(0,l.useState)(!1),b=async e=>{g(!0);try{var t;let n;n=await on(e),console.log("\ud83d\udcd6 Mock: German challenge created with settings");const r=n.challenge||(null===(t=n.data)||void 0===t?void 0:t.challenge)||n.data;o(r),a(e),c({})}catch(n){console.error("Fehler beim Erstellen der Deutsch-Herausforderung:",n),alert("Fehler beim Erstellen der Deutsch-Herausforderung. Bitte versuche es erneut.")}g(!1)},y=async()=>{if(s){g(!0);try{const e=await Pt.post("".concat(gn,"/german/challenge/").concat(s.id,"/submit"),i);f(e.data),h(!0)}catch(e){console.error("Fehler beim Einreichen der Antworten:",e),alert("Fehler beim Einreichen der Antworten. Bitte versuche es erneut.")}g(!1)}},v=s&&s.problems&&Array.isArray(s.problems)&&Object.keys(i).length===s.problems.length&&s.problems.every(((e,t)=>void 0!==i[t]&&""!==i[t]));return p&&d?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-4xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"text-center mb-6",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Fantastische Deutsch-Arbeit!"}),(0,Tt.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,Tt.jsxs)("p",{children:["Richtige Antworten: ",d.correct_answers,"/",d.total_problems]}),(0,Tt.jsxs)("p",{children:["Score: ",d.percentage.toFixed(1),"%"]}),(0,Tt.jsxs)("p",{className:"text-lg font-semibold text-yellow-600",children:["Verdiente Sterne: ",d.stars_earned," \u2b50"]})]})]}),(0,Tt.jsxs)("div",{className:"mb-6",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"\xdcberpr\xfcfe deine Antworten:"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.challenge.problems.map(((e,t)=>(0,Tt.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat(e.is_correct?"bg-green-50 border-green-300":"bg-red-50 border-red-300"),children:[(0,Tt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Tt.jsx)("span",{className:"text-lg mr-2",children:e.is_correct?"\u2705":"\u274c"}),(0,Tt.jsxs)("span",{className:"font-medium",children:["Aufgabe ",t+1]})]}),(0,Tt.jsx)("p",{className:"mb-2 font-medium whitespace-pre-line",children:e.question}),e.options&&(0,Tt.jsxs)("div",{className:"mb-2 text-sm",children:[(0,Tt.jsx)("p",{className:"font-medium",children:"Optionen:"}),(0,Tt.jsx)("div",{className:"flex flex-wrap gap-2",children:e.options.map(((t,n)=>(0,Tt.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(t===e.correct_answer?"bg-green-100 text-green-800":t===e.user_answer?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"),children:t},n)))})]}),(0,Tt.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,Tt.jsxs)("p",{children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Deine Antwort:"})," ",e.user_answer]}),!e.is_correct&&(0,Tt.jsxs)("p",{className:"text-green-600",children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Richtige Antwort:"})," ",e.correct_answer]})]})]},t)))})]}),(0,Tt.jsx)("div",{className:"text-center",children:(0,Tt.jsx)("button",{onClick:()=>{n(),t()},className:"bg-blue-500 text-white px-8 py-3 rounded-lg hover:bg-blue-600 transition-colors text-lg",children:"Super! Weiter"})})]})}):d&&!p?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-blue-800 mb-4",children:"Fantastische Deutsch-Arbeit!"}),(0,Tt.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,Tt.jsxs)("p",{children:["Richtige Antworten: ",d.correct_answers,"/",d.total_problems]}),(0,Tt.jsxs)("p",{children:["Score: ",d.percentage.toFixed(1),"%"]}),(0,Tt.jsxs)("p",{className:"text-lg font-semibold text-yellow-600",children:["Verdiente Sterne: ",d.stars_earned," \u2b50"]})]}),(0,Tt.jsxs)("div",{className:"flex space-x-4",children:[(0,Tt.jsx)("button",{onClick:()=>h(!0),className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Antworten \xdcberpr\xfcfen"}),(0,Tt.jsx)("button",{onClick:()=>{n(),t()},className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Weiter"})]})]})})}):s?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-3xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Tt.jsxs)("h2",{className:"text-xl font-bold text-blue-800",children:["Deutsch Klasse ",r," Herausforderung"]}),(0,Tt.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Tt.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["F\xfclle ALLE Antworten aus, um die Einreichung zu aktivieren. Antworten ausgef\xfcllt: ",Object.keys(i).length,"/",s.problems?s.problems.length:0,(0,Tt.jsx)("br",{}),(0,Tt.jsxs)("span",{className:"text-blue-600 font-medium",children:["Insgesamt ",s.problems?s.problems.length:0," Aufgaben"]})]}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 gap-4 mb-6",children:s.problems.map(((e,t)=>(0,Tt.jsxs)("div",{className:"p-4 border-2 rounded-lg transition-colors ".concat(void 0!==i[t]&&""!==i[t]?"border-green-300 bg-green-50":"border-blue-200 bg-white"),children:[(0,Tt.jsxs)("p",{className:"mb-3 font-medium whitespace-pre-line",children:[t+1,". ",e.question]}),e.options&&e.options.length>0&&(0,Tt.jsx)("div",{className:"space-y-2",children:e.options.map(((e,n)=>(0,Tt.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-blue-50 p-2 rounded",children:[(0,Tt.jsx)("input",{type:"radio",name:"question-".concat(t),value:e,checked:i[t]===e,onChange:e=>{c(u(u({},i),{},{[t]:e.target.value}))},className:"w-4 h-4 text-blue-600"}),(0,Tt.jsx)("span",{className:"text-sm",children:e})]},n)))}),(!e.options||0===e.options.length)&&(0,Tt.jsx)("input",{type:"text",className:"w-full p-2 border border-blue-300 rounded focus:outline-none focus:border-blue-500",placeholder:"Deine Antwort",value:i[t]||"",onChange:e=>{c(u(u({},i),{},{[t]:e.target.value}))}})]},t)))}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:t,className:"px-6 py-2 border border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors",children:"Abbrechen"}),(0,Tt.jsx)("button",{onClick:y,disabled:m||!v,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Einreichen...":"Alle Antworten Einreichen (".concat(Object.keys(i).length,"/").concat(s.problems?s.problems.length:0,")")})]})]})}):(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-blue-800 mb-6",children:"Verdiene Extra-Sterne mit Deutsch!"}),(0,Tt.jsx)("p",{className:"text-gray-600 mb-6",children:"W\xe4hle deine Deutsch-Klassenstufe:"}),(0,Tt.jsxs)("div",{className:"space-y-4",children:[(0,Tt.jsx)("button",{onClick:()=>b(2),disabled:m,className:"w-full p-4 bg-gradient-to-r from-blue-400 to-cyan-400 text-white rounded-xl hover:from-blue-500 hover:to-cyan-500 transition-all disabled:opacity-50",children:"\ud83d\udcd6 Deutsch Klasse 2"}),(0,Tt.jsx)("button",{onClick:()=>b(3),disabled:m,className:"w-full p-4 bg-gradient-to-r from-indigo-400 to-blue-400 text-white rounded-xl hover:from-indigo-500 hover:to-blue-500 transition-all disabled:opacity-50",children:"\ud83d\udcda Deutsch Klasse 3"})]}),(0,Tt.jsx)("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-800 transition-colors",children:"Vielleicht Sp\xe4ter"})]})})})},An=e=>{let{onClose:t,onComplete:n}=e;const[r,a]=(0,l.useState)(null),[s,o]=(0,l.useState)(null),[i,c]=(0,l.useState)({}),[d,f]=(0,l.useState)(null),[p,h]=(0,l.useState)(!1),[m,g]=(0,l.useState)(!1),b=async e=>{g(!0);try{var t;let n;n=await sn(e),console.log("\ud83e\uddee Mock: Math challenge created with settings");const r=n.challenge||(null===(t=n.data)||void 0===t?void 0:t.challenge)||n.data;if(!r.problems||!Array.isArray(r.problems))throw new Error("Invalid challenge format: missing problems array");o(r),a(e),c({})}catch(n){console.error("Fehler beim Erstellen der Mathe-Herausforderung:",n),alert("Fehler beim Erstellen der Mathe-Herausforderung. Bitte versuche es erneut.")}g(!1)},y=async()=>{if(s){g(!0);try{const e=await Pt.post("".concat(gn,"/math/challenge/").concat(s.id,"/submit"),i);f(e.data),h(!0)}catch(e){console.error("Fehler beim Einreichen der Antworten:",e),alert("Fehler beim Einreichen der Antworten. Bitte versuche es erneut.")}g(!1)}},v=s&&s.problems&&Array.isArray(s.problems)&&Object.keys(i).length===s.problems.length&&s.problems.every(((e,t)=>void 0!==i[t]&&""!==i[t]));return p&&d?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-4xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"text-center mb-6",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-purple-800 mb-4",children:"Gro\xdfartige Arbeit!"}),(0,Tt.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,Tt.jsxs)("p",{children:["Richtige Antworten: ",d.correct_answers,"/",d.total_problems]}),(0,Tt.jsxs)("p",{children:["Score: ",d.percentage.toFixed(1),"%"]}),(0,Tt.jsxs)("p",{className:"text-lg font-semibold text-yellow-600",children:["Verdiente Sterne: ",d.stars_earned," \u2b50"]})]})]}),(0,Tt.jsxs)("div",{className:"mb-6",children:[(0,Tt.jsx)("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"\xdcberpr\xfcfe deine Antworten:"}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.challenge.problems.map(((e,t)=>(0,Tt.jsxs)("div",{className:"p-4 rounded-lg border-2 ".concat(e.is_correct?"bg-green-50 border-green-300":"bg-red-50 border-red-300"),children:[(0,Tt.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Tt.jsx)("span",{className:"text-lg mr-2",children:e.is_correct?"\u2705":"\u274c"}),(0,Tt.jsxs)("span",{className:"font-medium",children:["Aufgabe ",t+1]})]}),"clock"===e.question_type&&e.clock_data&&(0,Tt.jsx)("div",{className:"mb-3",children:(0,Tt.jsx)(bn,{hours:e.clock_data.hours,minutes:e.clock_data.minutes})}),(0,Tt.jsx)("p",{className:"mb-2 font-medium",children:e.question}),(0,Tt.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,Tt.jsxs)("p",{children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Deine Antwort:"})," ",e.user_answer]}),!e.is_correct&&(0,Tt.jsxs)("p",{className:"text-green-600",children:[(0,Tt.jsx)("span",{className:"font-medium",children:"Richtige Antwort:"})," ",e.correct_answer]})]})]},t)))})]}),(0,Tt.jsx)("div",{className:"text-center",children:(0,Tt.jsx)("button",{onClick:()=>{n(),t()},className:"bg-purple-500 text-white px-8 py-3 rounded-lg hover:bg-purple-600 transition-colors text-lg",children:"Super! Weiter"})})]})}):d&&!p?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf89"}),(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-purple-800 mb-4",children:"Gro\xdfartige Arbeit!"}),(0,Tt.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,Tt.jsxs)("p",{children:["Richtige Antworten: ",d.correct_answers,"/",d.total_problems]}),(0,Tt.jsxs)("p",{children:["Score: ",d.percentage.toFixed(1),"%"]}),(0,Tt.jsxs)("p",{className:"text-lg font-semibold text-yellow-600",children:["Verdiente Sterne: ",d.stars_earned," \u2b50"]})]}),(0,Tt.jsxs)("div",{className:"flex space-x-4",children:[(0,Tt.jsx)("button",{onClick:()=>h(!0),className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"Antworten \xdcberpr\xfcfen"}),(0,Tt.jsx)("button",{onClick:()=>{n(),t()},className:"bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition-colors",children:"Weiter"})]})]})})}):s?(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-3xl w-full mx-4 my-8 max-h-[90vh] overflow-y-auto",children:[(0,Tt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Tt.jsxs)("h2",{className:"text-xl font-bold text-purple-800",children:["Mathe Klasse ",r," Herausforderung"]}),(0,Tt.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,Tt.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["F\xfclle ALLE Antworten aus, um die Einreichung zu aktivieren. Antworten ausgef\xfcllt: ",Object.keys(i).length,"/",s.problems?s.problems.length:0,(0,Tt.jsx)("br",{}),(0,Tt.jsxs)("span",{className:"text-purple-600 font-medium",children:["Insgesamt ",s.problems?s.problems.length:0," Aufgaben"]})]}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:s.problems.map(((e,t)=>(0,Tt.jsxs)("div",{className:"p-4 border-2 rounded-lg transition-colors ".concat(void 0!==i[t]&&""!==i[t]?"border-green-300 bg-green-50":"border-purple-200 bg-white"),children:[(0,Tt.jsxs)("p",{className:"mb-2 font-medium",children:[t+1,". ",e.question]}),"clock"===e.question_type&&e.clock_data&&(0,Tt.jsx)("div",{className:"mb-3",children:(0,Tt.jsx)(bn,{hours:e.clock_data.hours,minutes:e.clock_data.minutes})}),(0,Tt.jsx)("input",{type:"text",className:"w-full p-2 border border-purple-300 rounded focus:outline-none focus:border-purple-500",placeholder:"clock"===e.question_type?"z.B. 3:30":"currency"===e.question_type?"z.B. 5,50":"Deine Antwort",value:i[t]||"",onChange:e=>{c(u(u({},i),{},{[t]:e.target.value}))}})]},t)))}),(0,Tt.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,Tt.jsx)("button",{onClick:t,className:"px-6 py-2 border border-purple-300 text-purple-600 rounded-lg hover:bg-purple-50 transition-colors",children:"Abbrechen"}),(0,Tt.jsx)("button",{onClick:y,disabled:m||!v,className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Einreichen...":"Alle Antworten Einreichen (".concat(Object.keys(i).length,"/").concat(s.problems?s.problems.length:0,")")})]})]})}):(0,Tt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Tt.jsx)("div",{className:"bg-white rounded-xl p-8 max-w-md w-full mx-4",children:(0,Tt.jsxs)("div",{className:"text-center",children:[(0,Tt.jsx)("h2",{className:"text-2xl font-bold text-purple-800 mb-6",children:"Verdiene Extra-Sterne!"}),(0,Tt.jsx)("p",{className:"text-gray-600 mb-6",children:"W\xe4hle deine Mathe-Klassenstufe:"}),(0,Tt.jsxs)("div",{className:"space-y-4",children:[(0,Tt.jsx)("button",{onClick:()=>b(2),disabled:m,className:"w-full p-4 bg-gradient-to-r from-purple-400 to-pink-400 text-white rounded-xl hover:from-purple-500 hover:to-pink-500 transition-all disabled:opacity-50",children:"\ud83d\udcda Mathe Klasse 2"}),(0,Tt.jsx)("button",{onClick:()=>b(3),disabled:m,className:"w-full p-4 bg-gradient-to-r from-indigo-400 to-purple-400 text-white rounded-xl hover:from-indigo-500 hover:to-purple-500 transition-all disabled:opacity-50",children:"\ud83c\udf93 Mathe Klasse 3"})]}),(0,Tt.jsx)("button",{onClick:t,className:"mt-4 text-purple-600 hover:text-purple-800 transition-colors",children:"Vielleicht Sp\xe4ter"})]})})})};const On=function(){const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)([]),[a,s]=(0,l.useState)({total_stars:0,stars_in_safe:0,available_stars:0}),[o,i]=(0,l.useState)([]),[c,u]=(0,l.useState)(""),[d,f]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[m,g]=(0,l.useState)(!1),[b,y]=(0,l.useState)(!1),[v,x]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[S,j]=(0,l.useState)(!1),[N,_]=(0,l.useState)(!1),[E,C]=(0,l.useState)(!1),[A,O]=(0,l.useState)(!1),[z,P]=(0,l.useState)(!1),[T,R]=(0,l.useState)(null),[D,L]=(0,l.useState)(!0);(0,l.useEffect)((()=>{F()}),[]);const F=async()=>{try{{const e=await qt(),n=await Kt(),l=await Jt(),a=await tn();t(e),r(n),s(l),i(a),console.log("\ud83d\udcca Demo Mode: Data loaded from mock API"),console.log("\ud83d\udcca Progress object:",l)}}catch(e){console.error("Fehler beim Laden der Daten:",e)}L(!1)},M=async()=>{const e=c.trim();if(e)try{await Gt({name:e}),u(""),await F(),alert('\u2705 Aufgabe "'.concat(e,'" erfolgreich hinzugef\xfcgt! (Demo Mode)')),console.log("Aufgabe erfolgreich hinzugef\xfcgt (Mock):",e)}catch(t){console.error("Fehler beim Hinzuf\xfcgen der Aufgabe:",t),alert("Fehler beim Hinzuf\xfcgen der Aufgabe. Bitte versuche es erneut.")}else alert("Bitte gib einen Aufgabennamen ein!")},B=async(e,t,n)=>{console.log("\u2b50 handleStarClick called:",{taskId:e,day:t,stars:n});try{await Qt(e,t,n),console.log("\u2b50 Demo Mode: Updated stars for task ".concat(e," on ").concat(t,": ").concat(n," stars")),console.log("\ud83d\udd04 Calling loadData() to refresh..."),F()}catch(r){console.error("Fehler beim Aktualisieren der Sterne:",r)}},U=async()=>{try{await an(),F(),alert("Alle Sterne wurden erfolgreich zur\xfcckgesetzt! ".concat("(Demo Mode)"))}catch(e){console.error("Fehler beim Zur\xfccksetzen aller Sterne:",e),alert("Fehler beim Zur\xfccksetzen aller Sterne!")}};return D?(0,Tt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center",children:(0,Tt.jsx)("div",{className:"text-2xl text-purple-600",children:"Lade deinen Stern-Tracker..."})}):(0,Tt.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:(0,Tt.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,Tt.jsxs)("div",{className:"text-center py-8 relative",children:[(0,Tt.jsx)("h1",{className:"text-4xl font-bold text-purple-800 mb-2",children:"\u2b50 W\xf6chentlicher Stern-Tracker \u2b50"}),(0,Tt.jsx)("p",{className:"text-purple-600",children:"Erf\xfclle deine Aufgaben und sammle Sterne f\xfcr tolle Belohnungen!"}),(0,Tt.jsx)("button",{onClick:U,className:"absolute top-0 right-0 bg-red-500 text-white px-3 py-2 rounded-lg hover:bg-red-600 transition-colors text-sm font-medium shadow-md",title:"Alle Sterne zur\xfccksetzen",children:"\ud83d\uddd1\ufe0f Alle Zur\xfccksetzen"})]}),(0,Tt.jsx)(xn,{taskStars:a.total_stars,availableStars:a.available_stars||0,totalEarned:a.total_stars_earned||0,onAddTaskStarsToAvailable:async()=>{if(console.log("\ud83d\udd27 addTaskStarsToAvailable called! progress.total_stars:",a.total_stars),0===a.total_stars)return void alert("Keine Aufgaben-Sterne verf\xfcgbar!");const e=a.total_stars,t=prompt("Wie viele Aufgaben-Sterne zu verf\xfcgbaren Sternen hinzuf\xfcgen? (Verf\xfcgbar: ".concat(e,")"));if(console.log("\ud83d\udd27 User input:",t),!t)return;const n=parseInt(t);if(console.log("\ud83d\udd27 Parsed amount:",n),n>e)alert("Du hast nur ".concat(e," Aufgaben-Sterne! Du kannst nicht mehr verschieben als du besitzt."));else if(n<=0)alert("Bitte gib eine g\xfcltige Anzahl ein!");else try{await en(n),console.log("\u2b50 Mock: Moved ".concat(n," task stars to available reward stars")),F(),alert("\u2705 ".concat(n," Sterne erfolgreich zu verf\xfcgbaren Sternen verschoben! (").concat("Demo Mode",")"))}catch(i){var r,l,s,o;console.error("Fehler beim Verschieben der Sterne:",i);let e="Fehler beim Verschieben der Sterne! Bitte versuche es erneut.";null!==(r=i.response)&&void 0!==r&&null!==(l=r.data)&&void 0!==l&&l.detail?e="string"===typeof i.response.data.detail?i.response.data.detail:JSON.stringify(i.response.data.detail):null!==(s=i.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.message?e="string"===typeof i.response.data.message?i.response.data.message:JSON.stringify(i.response.data.message):i.message&&(e=i.message),alert("\u274c Fehler: ".concat(e)),F()}}}),(0,Tt.jsxs)("div",{className:"flex justify-center space-x-4 mb-6",children:[(0,Tt.jsx)("button",{onClick:()=>g(!0),className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-8 py-6 rounded-2xl text-lg font-bold hover:from-green-600 hover:to-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"\ud83e\uddee Mathe-Herausforderung"}),(0,Tt.jsx)("button",{onClick:()=>y(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-8 py-6 rounded-2xl text-lg font-bold hover:from-blue-600 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"\ud83d\udcd6 Deutsch-Herausforderung"}),(0,Tt.jsx)("button",{onClick:()=>x(!0),className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white px-8 py-6 rounded-2xl text-lg font-bold hover:from-purple-600 hover:to-violet-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"\ud83c\uddec\ud83c\udde7 Englisch-Herausforderung"})]}),(0,Tt.jsx)(wn,{current:a.total_stars,total:a.total_stars+a.stars_in_safe,starsInSafe:a.stars_in_safe,onOpenSafe:()=>k(!0),onAddToSafe:()=>{j(!0)},onOpenAdminSettings:()=>P(!0)}),(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-purple-100 task-management",children:[(0,Tt.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Tt.jsx)("h2",{className:"text-xl font-semibold text-purple-800",children:"Meine Aufgaben"})}),(0,Tt.jsx)("div",{className:"grid grid-cols-8 gap-4 p-4 bg-purple-100 rounded-xl font-semibold text-purple-800 mb-4",children:["Aufgabe","Mo","Di","Mi","Do","Fr","Sa","So"].map((e=>(0,Tt.jsx)("div",{className:"text-center",children:e},e)))}),(0,Tt.jsx)("div",{className:"space-y-3",children:e.map((e=>(0,Tt.jsxs)("div",{className:"relative group",children:[(0,Tt.jsx)(vn,{task:e,weekStars:n,onStarClick:B}),(0,Tt.jsx)("button",{onClick:()=>(async e=>{try{await $t(e),console.log("\ud83d\uddd1\ufe0f Mock: Deleted task ".concat(e)),F()}catch(t){console.error("Fehler beim L\xf6schen der Aufgabe:",t)}})(e.id),className:"absolute -right-2 -top-2 bg-red-500 text-white rounded-full w-6 h-6 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]},e.id)))}),(0,Tt.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,Tt.jsx)("input",{type:"text",placeholder:"Neue Aufgabe hinzuf\xfcgen...",value:c,onChange:e=>u(e.target.value),className:"flex-1 p-3 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),M())}}),(0,Tt.jsx)("button",{onClick:e=>{e.preventDefault(),M()},className:"bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 transition-colors font-medium",disabled:!c.trim(),children:"Aufgabe Hinzuf\xfcgen"})]})]}),(0,Tt.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-purple-100 rewards-section",children:[(0,Tt.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Tt.jsx)("h2",{className:"text-xl font-semibold text-purple-800",children:"\ud83c\udf81 Belohnungen"})}),(0,Tt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:o.map((e=>(0,Tt.jsx)("div",{className:"p-4 rounded-xl border-2 transition-all ".concat(e.is_claimed?"bg-gray-100 border-gray-300 text-gray-500":"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-300 text-purple-800"),children:(0,Tt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Tt.jsxs)("div",{children:[(0,Tt.jsx)("h3",{className:"font-semibold",children:e.name}),(0,Tt.jsxs)("p",{className:"text-sm",children:[e.required_stars," \u2b50"]})]}),!e.is_claimed&&(0,Tt.jsx)("button",{onClick:()=>(async e=>{const t=o.find((t=>t.id===e));if(t)if(a.available_stars<t.required_stars)R({rewardName:t.name,requiredStars:t.required_stars,availableStars:a.available_stars});else try{await Pt.post("".concat(gn,"/rewards/").concat(e,"/claim")),F()}catch(n){console.error("Fehler beim Einl\xf6sen der Belohnung:",n),R({rewardName:t.name,requiredStars:t.required_stars,availableStars:a.available_stars})}})(e.id),className:"bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors text-sm",children:"Einl\xf6sen!"}),e.is_claimed&&(0,Tt.jsx)("div",{className:"text-green-600 font-semibold",children:"\u2713 Eingel\xf6st"})]})},e.id)))}),(0,Tt.jsxs)("div",{className:"flex space-x-2",children:[(0,Tt.jsx)("input",{type:"text",placeholder:"Belohnungsname...",value:d,onChange:e=>f(e.target.value),className:"flex-1 p-3 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"}),(0,Tt.jsx)("input",{type:"number",min:"1",placeholder:"Ben\xf6tigte Sterne",value:p,onChange:e=>h(e.target.value),className:"w-32 p-3 border border-purple-300 rounded-lg focus:outline-none focus:border-purple-500"}),(0,Tt.jsx)("button",{onClick:e=>{e.preventDefault(),(async()=>{const e=d.trim(),t=parseInt(p);if(e)if(!t||t<1)alert("Bitte gib eine g\xfcltige Anzahl Sterne ein (mindestens 1)!");else try{await nn({name:e,stars_required:t}),f(""),h(""),await F(),alert('\u2705 Belohnung "'.concat(e,'" erfolgreich hinzugef\xfcgt! (Demo Mode)')),console.log("Belohnung erfolgreich hinzugef\xfcgt (Mock):",e,t)}catch(n){console.error("Fehler beim Hinzuf\xfcgen der Belohnung:",n),alert("Fehler beim Hinzuf\xfcgen der Belohnung. Bitte versuche es erneut.")}else alert("Bitte gib einen Belohnungsnamen ein!")})()},className:"bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-colors font-medium",disabled:!d.trim()||!p||parseInt(p)<1,children:"Belohnung Hinzuf\xfcgen"})]})]}),m&&(0,Tt.jsx)(An,{onClose:()=>g(!1),onComplete:F}),b&&(0,Tt.jsx)(Cn,{onClose:()=>y(!1),onComplete:F}),v&&(0,Tt.jsx)(En,{onClose:()=>x(!1),onComplete:F}),w&&(0,Tt.jsx)(Sn,{isOpen:w,onClose:()=>k(!1),starsInSafe:a.stars_in_safe,onWithdraw:async e=>{try{await Yt(e),console.log("\u2b50 Demo Mode: Withdrew ".concat(e," stars from safe")),F(),k(!1),alert("\u2705 ".concat(e," Sterne erfolgreich aus dem Tresor genommen! (").concat("Demo Mode",")"))}catch(a){var t,n,r,l;console.error("Fehler beim Abheben aus dem Tresor:",a);let e="Fehler beim Tresor-Vorgang. Bitte versuche es erneut.";null!==(t=a.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail?e="string"===typeof a.response.data.detail?a.response.data.detail:JSON.stringify(a.response.data.detail):null!==(r=a.response)&&void 0!==r&&null!==(l=r.data)&&void 0!==l&&l.message?e="string"===typeof a.response.data.message?a.response.data.message:JSON.stringify(a.response.data.message):a.message&&(e=a.message),alert("\u274c Fehler: ".concat(e))}}}),S&&(0,Tt.jsx)(Rt,{isOpen:S,onClose:()=>j(!1),progress:a,onTransfer:async(e,t)=>{try{e>0&&(await Xt(e),console.log("\u2b50 Demo Mode: Moved ".concat(e," task stars to safe"))),t>0&&(await Zt(t),console.log("\u2b50 Demo Mode: Moved ".concat(t," reward stars to safe"))),F()}catch(s){var n,r,l,a;console.error("Fehler beim Verschieben der Sterne in den Tresor:",s);let e="Fehler beim Verschieben der Sterne in den Tresor. Bitte versuche es erneut.";throw null!==(n=s.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.detail?e="string"===typeof s.response.data.detail?s.response.data.detail:JSON.stringify(s.response.data.detail):null!==(l=s.response)&&void 0!==l&&null!==(a=l.data)&&void 0!==a&&a.message?e="string"===typeof s.response.data.message?s.response.data.message:JSON.stringify(s.response.data.message):s.message&&(e=s.message),alert("\u274c Fehler: ".concat(e)),s}}}),N&&(0,Tt.jsx)(_n,{isOpen:N,onClose:()=>_(!1),onComplete:F}),E&&(0,Tt.jsx)(Nn,{isOpen:E,onClose:()=>C(!1),onComplete:F}),A&&(0,Tt.jsx)(jn,{isOpen:A,onClose:()=>O(!1),onComplete:F}),T&&(0,Tt.jsx)(kn,{isOpen:!0,onClose:()=>R(null),rewardName:T.rewardName,requiredStars:T.requiredStars,availableStars:T.availableStars}),z&&(0,Tt.jsx)(Dt,{isOpen:z,onClose:()=>P(!1),onResetWeek:async()=>{try{await rn(),F(),alert("Woche wurde zur\xfcckgesetzt. Tresor-Sterne wurden beibehalten! ".concat("(Demo Mode)"))}catch(e){console.error("Fehler beim Zur\xfccksetzen der Woche:",e),alert("Fehler beim Zur\xfccksetzen der Woche!")}},onResetSafe:async()=>{try{await ln(),F(),alert("Tresor wurde zur\xfcckgesetzt. Alle anderen Sterne wurden beibehalten! ".concat("(Demo Mode)"))}catch(e){console.error("Fehler beim Zur\xfccksetzen des Tresors:",e),alert("Fehler beim Zur\xfccksetzen des Tresors!")}},onResetAllStars:U,onDeleteAllRewards:async()=>{try{await Pt.delete("".concat(gn,"/rewards/all")),F(),alert("Alle Belohnungen wurden erfolgreich gel\xf6scht!")}catch(e){console.error("Fehler beim L\xf6schen aller Belohnungen:",e),alert("Fehler beim L\xf6schen der Belohnungen!")}},onManageTasks:()=>{var e;P(!1),null===(e=document.querySelector(".task-management"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},onManageRewards:()=>{var e;P(!1),null===(e=document.querySelector(".rewards-section"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},onOpenMathSettings:()=>_(!0),onOpenGermanSettings:()=>C(!0),onOpenEnglishSettings:()=>O(!0),onExportData:async()=>{try{const e=(await Pt.get("".concat(gn,"/backup/export"))).data,t=(new Date).toISOString().split("T")[0],n="weekly-star-tracker-backup-".concat(t,".json"),r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(r),a=document.createElement("a");a.href=l,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l),alert("\u2705 Backup erfolgreich erstellt!\n\nDatei: ".concat(n,"\n\nDie Datei wurde in Ihre Downloads gespeichert."))}catch(e){console.error("Fehler beim Exportieren:",e),alert("\u274c Fehler beim Erstellen des Backups!")}},onImportData:e=>{const t=e.target.files[0];if(t)if("application/json"===t.type||t.name.endsWith(".json")){confirm('\u26a0\ufe0f ACHTUNG: Import \xfcberschreibt alle aktuellen Daten!\n\nM\xf6chten Sie zuerst ein Backup Ihrer aktuellen Daten erstellen?\n\nKlicken Sie "Abbrechen" um zuerst zu exportieren, oder "OK" um fortzufahren.')&&(async e=>{try{const t=await e.text(),n=JSON.parse(t);if(!n.data||!n.app_version)throw new Error("Ung\xfcltiges Backup-Format");const r=(await Pt.post("".concat(gn,"/backup/import"),n)).data.results;let l="\u2705 Import erfolgreich!\n\n";l+="\ud83d\udcdd Aufgaben: ".concat(r.tasks,"\n"),l+="\ud83d\udcc8 Fortschritt: ".concat(r.progress,"\n"),l+="\ud83c\udf81 Belohnungen: ".concat(r.rewards,"\n"),l+="\u2699\ufe0f Einstellungen: ".concat(r.settings,"\n"),l+="\ud83d\udcca Statistiken: ".concat(r.statistics,"\n"),r.errors.length>0&&(l+="\n\u26a0\ufe0f Fehler: ".concat(r.errors.length,"\n"),r.errors.forEach((e=>l+="\u2022 ".concat(e,"\n")))),alert(l),F()}catch(t){console.error("Fehler beim Importieren:",t);let e="\u274c Import fehlgeschlagen!\n\n";t.message.includes("JSON")?e+="Die Datei ist keine g\xfcltige Backup-Datei.":t.response?e+="Server-Fehler: ".concat(t.response.data.detail||t.response.statusText):e+="Fehler: ".concat(t.message),alert(e)}})(t)}else alert("\u274c Bitte w\xe4hlen Sie eine JSON-Datei aus!");e.target.value=""}})]})})};a.createRoot(document.getElementById("root")).render((0,Tt.jsx)(l.StrictMode,{children:(0,Tt.jsx)(On,{})})),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/sw.js").then((e=>{console.log("\ud83d\ude80 Service Worker registered successfully:",e),e.addEventListener("updatefound",(()=>{const t=e.installing;t&&t.addEventListener("statechange",(()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("\ud83d\udd04 New version available! Please refresh the page.")}))}))})).catch((e=>{console.error("\u274c Service Worker registration failed:",e)}))}))})();
//# sourceMappingURL=main.33475a32.js.map